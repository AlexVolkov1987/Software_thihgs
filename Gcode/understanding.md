# GCode

## Краткий обзор:

Gcode - это команды, интерпретируя которые, принтер выполняет необходимые действия для построения модели. Понимание этих команд позволяет определять наличие некоторых проблем, а также писать простые последовательности, облегчающие настройку принтера, его обслуживание или подготовку к печати.

В этом документе я буду рассматривать и дополнять по мере возможности нюансы, связанные с различными командами и их интерпретацию прошивками Marlin и RepRap

------

## Команды

### Команда G28 - Move to Home (to Origin)

Одна из самых популярных команд. По умолчанию перемещает печатающую головку в координаты 0,0,0. При этом, сначала в координату 0 уходит ось X, потом - ось Y и в конце - ось Z.

Теоретически, используя аргументы X, Y, Z совместно с командой G28, можно перемещать печатающую головку в нулевую координату только по одной или двум осям, но точно так же можно перемещать их и командой G0.

#### Примеры использования команды:

| Команда | Действие                                     |
| ------- | -------------------------------------------- |
| G28     | Выполнить перемещение в координату 0,0,0     |
| G28 Z   | Выполнить перемещение в 0 только по оси Z    |
| G28 X Y | Выполнить перемещение в 0 по координатам X,Y |

------

### Команды G90 и G91

Эти 2 команды очень важны для понимания, так как являются командами-модификаторами, влияющими на все команды, в которых необходимо указывать координаты.

Команда G90 переключает принтер в режим абсолютного позиционирования. Это значит, что точка отсчета координат всегда находится в одном месте. Как правило, это место совпадает с местом хоуминга, но есть исключения.

Тем не менее, после использования команды G90 точка отсчета зафиксирована и поэтому все команды перемещения используют координаты относительно этой точки.

При использовании команды G90 Каждая следующая команда перемещения будет использовать в качестве точки отсчета положение печатающей головки после выполнения предыдущей команды перемещения. Этот режим называется относительным позиционированием.

Для чего необходимо использовать каждый режим?

В режиме абсолютного позиционирования выполняется большинство команд перемещения при печати. Это самый простой способ переноса координат из пространства слайсера в пространство принтера. 

Однако, если есть необходимость написать оконечный код для слайсера, который выполняется после печати, то возникает проблема: мы не знаем заранее высоту напечатанной модели и координаты точки, в которой печатающая головка завершит печать. Таким образом, если после печати необходимо поднять печатающую головку на 5мм над моделью, нам придется воспользоваться именно относительным позиционированием, ведь указать абсолютную координату заранее мы не можем.

Стоит также отметить тот факт, что часть слайсеров при начале печати автоматически генерируют код с командой G90 перед началом печати, чтобы избегнуть ситуаций с неправильным позиционированием.

Примеры использования команд будут приведены в описании команд G0/G1 

------

### Команды G0 и G1

С помощью этих команд осуществляется собственно печать модели.

Технически, G0 - это движение печатающей головки <u>без</u> экструзии, а G1 - <u>с</u> экструзией пластика. Однако G1 вполне может использоваться для движения без экструзии.

Типичный способ использования этих команд - эту указать координату, куда нужно переместить печатающую головку и указать скорость перемещения.

**Хинт(0):** скорость перемещения указывается не в мм/с, а в мм/мин! То есть, если мы хотим переместить печатающую головку со скоростью 50мм/с, то в коде мы должны указать скорость 3000мм/мин, то есть в 60 раз больше.

**Хинт(1):** скорость перемещения распространяется не только на текущую команду перемещения, но и на все последующие, до тех пор, пока она не будет указана снова. это позволяет не писать значение скорости в каждой команде перемещения, если мы не нуждаемся в смене скорости.

**Хинт(2):** координаты, которые не нужно изменять, тоже можно не указывать в аргументах команды.

**Хинт(3):** если используется координата E, то есть выдавливается или втягивается пластик, то сопло принтера должно быть разогрето до минимальной температуры экструзии (обычно 170-180 градусов), чтобы эта команда была в принципе выполнена.

#### Примеры использования команд:

| Команда            | Действие |
| ------------------ | -------- |
| G0 F600 X10 Y10 Z5 |          |
| G0 F600 X35        |          |
| G0 Y15 Z45         |          |

Пример использования команд совместно с командами G90/G91:

`G90`

`G0 F600 X50 Y50 Z50`

`G91`

`G0 X+5 Y-5 Z+0.1`

Комментарий: в примере использования команд G0/G1 совместно с командами G90/G91 происходит перемещение печатающей головки в точку с координатами 50,50,50 в абсолютном режиме. Эта точка будет находиться в одном и том же месте внутри пространства принтера всегда.

В режиме относительного позиционирования происходит перемещение в новые координаты, которые считаются относительно старых. То есть новые координаты будут выглядеть как 50+5,50-5,50+0.1 или же 55,45,50.1

------

### Команда G92

